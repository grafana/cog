---
weight: 1
---
# Creating a codegen pipeline

Pipelines are defined in YAML files usually named `cog.yaml`.

A typical pipeline will revolve around three main blogs:

* `inputs`: a list of schemas from which code will be generated
* `transformations`: modifications made by cog to the types described by the schemas and/or the builders it will generate. This block is optional.
* `output`: what should be generated, where, and in which language(s)

```yaml
# yaml-language-server: $schema=https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json

debug: true

# `inputs` describes a list of schemas used by the pipeline to generate code.
inputs: []

# `transformations` is optional and holds transformations to apply to schemas
# and/or builders.
transformations:
  schemas: []

  builders: []

# `output` configures what will be generated by cog, where, and in which
# languages.
output:
  directory: './generated/%l'

  types: true
  builders: true
  converters: true
  api_reference: true

  languages: []
```

??? tip "Recommended: configuration validation and auto-complete"

    In order to help with configuring cog pipelines, a [schema][schema.json] for
    `cog.yaml` files is provided. If your editor supports YAML schema validation,
    it is definitely recommended to set it up:

    === "Visual Studio Code"

        1.  Install [`vscode-yaml`][vscode-yaml] for YAML language support.
        2.  Add the schema under the `yaml.schemas` key in your user or
            workspace [`settings.json`][settings.json]:

            ``` json
            {
              "yaml.schemas": {
                "https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json": "cog.yaml"
              }
            }
            ```

    === "Other"

        1.  Ensure your editor of choice has support for YAML schema validation.
        2.  Add the following lines at the top of `mkdocs.yml`:

            ``` yaml
            # yaml-language-server: $schema=https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json
            ```

[schema.json]: https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json
[vscode-yaml]: https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml
[settings.json]: https://code.visualstudio.com/docs/getstarted/settings

## Example pipeline

The following pipeline takes the [schema exposed by cog to describe pipelines](https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json),
and generates types as well as builders from it in Go and Typescript:

```yaml
# yaml-language-server: $schema=https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json

debug: true

# `inputs` describes a list of schemas used by the pipeline to generate code.
inputs:
  - jsonschema:
      url: https://raw.githubusercontent.com/grafana/cog/main/schemas/pipeline.json
      package: codegen

# `output` configures what will be generated by cog, where, and in which
# languages.
output:
  directory: './generated/%l'

  types: true
  builders: true

  languages:
    - go:
        package_root: 'github.com/owner/repo/generated/go'
    - typescript: {}
```

You can run it yourself with:

```shell
cog generate --config cog.yaml
```

## Inputs

### CUE

TBD

### JSON schema

TBD

### OpenAPI

TBD

## Outputs

### Go

TBD

### Java

TBD

### PHP

TBD

### Python

TBD

### Typescript

TBD

## Transformations

See ["Applying schema transformations"](./schema_transformations.md) and
["Applying builder transformations"](./builder_transformations.md).
