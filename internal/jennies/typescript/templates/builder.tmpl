{{ range $alias, $importPath := .Imports -}}
import * as {{ $alias }} from '{{ $importPath }}';
{{- end }}
import { CogOptionsBuilder } from '../options_builder_gen';

export class {{ .BuilderName|upperCamelCase }}Builder implements CogOptionsBuilder<{{ .ImportAlias }}.{{ .ObjectName }}> {
    private readonly internal: {{ .ImportAlias }}.{{ .ObjectName }};

    constructor({{ template "args" .Constructor.Args }}) {
        this.internal = {{ .ImportAlias }}.default{{ .ObjectName | upperCamelCase }}();
        {{- range $arg := .Constructor.Assignments }}
        {{- template "constraints" $arg.Constraints }}
        this.internal.{{ $arg.Path }} = {{ $arg.Value }};
        {{- end }}
    }

    build(): {{ .ImportAlias }}.{{ .ObjectName }} {
        return this.internal;
    }
{{ range .Options }}
    {{- range .Comments}}
    // {{ . }}
    {{- end }}
    {{ .Name }}({{ template "args" .Args }}): this {
{{- range .Assignments }}
{{- range .InitSafeguards }}
{{ . }}
{{- end }}
{{- template "constraints" .Constraints }}
        {{ if eq .Method "direct" }}this.internal.{{ .Path }} = {{ .Value }}{{ if .IsBuilder }}.build(){{ end }};{{ end -}}
        {{ if eq .Method "append" }}this.internal.{{ .Path }}.push({{ .Value }}{{ if .IsBuilder }}.build(){{ end }});{{ end -}}
{{ end }}
        return this;
    }
{{ end -}}
}
