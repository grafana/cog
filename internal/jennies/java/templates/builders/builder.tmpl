package {{ .Package }};

{{ .Imports }}

{{- $className := .ObjectSignature | lowerCamelCase }}
{{- $builderName := .Name }}
public class {{ .Name | camelcase }}Builder implements Builder<{{ .ObjectSignature }}> {
    {{- range .Fields }}
    private {{ .Type }} {{ .Name }};
    {{- end }}
    
    {{- range .Properties }}
    private {{ .Type }} {{ .Name }};
    {{- end }}
    
    public {{ .Name | camelcase }}Builder() {
    }
    
    {{- range $opt := .Options }}
    public {{ $.Name | camelcase }}Builder set{{ $opt.Name }}({{ template "args" $opt.Args }}) {
        {{- range .Assignments }}
            {{- template "assignment" (dict "Assignment" . "BuilderName" $builderName "OptionName" $opt.Name) }}
        {{- end }}
        return this;
    }
    {{ end }}
    
    public {{ .ObjectSignature }} build() {
        {{ .ObjectSignature }} {{ $className }} = new {{ .ObjectSignature }}();
        {{- range .Fields }}
        {{ $className }}.set{{ .Name | camelcase }}({{ .Name }});
        {{- end }}
        return {{ $className }};
    }
}
